{% extends 'base.html' %}
{% load static %}


{% load widget_tweaks %}
{% load rest_framework %}
{% load enquiries_extras %}
{% block main %}
<div class="govuk-grid-row enquiry-details-row enquiry-details-header">

    <h2 class="govuk-heading-l">{{ serializer.company_name.value }}</h2>

    <dl class="govuk-summary-list--no-border">
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
                Date received
            </dt>
            <dd class="govuk-summary-list__value">{{ serializer.created.value }}</dd>
        </div>
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
                Date last updated
            </dt>
            <dd class="govuk-summary-list__value">{{ serializer.modified.value }}</dd>
        </div>
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
                Enquiry stage
            </dt>
            <dd class="govuk-summary-list__value">
                {{ serializer.enquiry_stage.choices|get_item:serializer.enquiry_stage.value }}</dd>
        </div>
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
                Owner
            </dt>
            <dd class="govuk-summary-list__value">{% if obj.owner %}{{ obj.owner.user }} {%else%}
                {{ "Unassigned" }} {%endif%}</dd>
        </div>
    </dl>
</div>

<form class="form" action="{% url 'enquiry-edit' pk=pk %}" method="post">
    {% csrf_token %}

    <div>
        {% if not serializer.is_valid %}
        {% for key,error in serializer.errors.items %}
        {{key}}: {{ error.0 }} <br>
        {% endfor %}
        {% endif %}
    </div>

    <div class="govuk-grid-row enquiry-edit-row">

        {% include 'snippets/enquiry_field_input.html' with field=serializer.company_name %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.enquiry_stage %}

        <!-- TODO: Replace with snippet when owner implementation is ready -->
        <div class="govuk-form-group">
            <label for="owner" class="govuk-label">
                {{ serializer.owner.label }}
            </label>
            <select name="{{ serializer.owner.name }}" id="{{ serializer.owner.name }}" class="govuk-select">
                <option value="" {% if not serializer.owner.value %} selected{% endif %}>
                    Unassigned
                </option>
                {% for key, owner in serializer.owner.choices.items %}
                <option value="{{ key }}" {% if key == serializer.owner.value %} selected{% endif %}>
                    {{ owner }}
                </option>
                {% endfor %}
            </select>
        </div>

    </div>

    <div class="govuk-grid-row enquiry-edit-row">

<<<<<<< HEAD
        <h3 class="govuk-heading-m">Enquiry details</h3>
=======
        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Contact</h3>


            <div class="govuk-form-group">
                <label class="govuk-label" for="enquirer-first-name">
                    Enquirer first name
                </label>
                <input class="govuk-input" id="enquirer-first-name" name="enquirer-first-name" type="text"
                    spellcheck="false" value="Evelyn">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="enquirer-last-name">
                    Enquirer last name
                </label>
                <input class="govuk-input" id="enquirer-last-name" name="enquirer-last-name" type="text"
                    spellcheck="false" value="Wang">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="job-title">
                    Job title
                </label>
                <input class="govuk-input" id="job-title" name="job-title" type="text" value="Director">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="enquirer-email">
                    Enquirer email address
                </label>
                <input class="govuk-input" id="enquirer-email" name="enquirer-email" type="email"
                    spellcheck="false" value="evelyn.wang@example.com">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="telephone-number">
                    Telephone number
                </label>
                <input class="govuk-input govuk-input--width-20" id="telephone-number" name="telephone-number"
                    type="tel" value="+86 88 8888 8888">
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend">
                        Request for call
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="" name="request-for-call" type="radio"
                                value="yes-morning">
                            <label class="govuk-label govuk-radios__label" for="request-for-call">
                                Yes – morning
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="request-for-call-2" name="request-for-call" type="radio"
                                value="yes-afternoon" checked>
                            <label class="govuk-label govuk-radios__label" for="request-for-call-2">
                                Yes – afternoon
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="request-for-call-3" name="request-for-call" type="radio"
                                value="yes-other">
                            <label class="govuk-label govuk-radios__label" for="request-for-call-3">
                                Yes – other
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="request-for-call-3" name="request-for-call" type="radio"
                                value="no">
                            <label class="govuk-label govuk-radios__label" for="request-for-call-3">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>
>>>>>>> Update edit template - contact

        {% include 'snippets/enquiry_field_textarea.html' with field=serializer.enquiry_text %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.investment_readiness %}

<<<<<<< HEAD
        {% include 'snippets/enquiry_field_select.html' with field=serializer.quality %}
=======
            <h3 class="govuk-heading-m">Marketing</h3>

            <div class="govuk-form-group">
                <label class="govuk-label" for="google-campaign">
                    Google campaign
                </label>
                <input class="govuk-input" id="google-campaign" name="google-campaign" type="text" value="#r.4142563726849_345374257">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="marketing-channel">
                    Marketing channel
                </label>
                <select class="govuk-select" id="marketing-channel" name="marketing-channel">
                    <option value="linkedinleadgen">LinkedInLeadGen</option>
                    <option value="chogm">CHOGM</option>
                    <option value="iigb" selected>IiGB</option>
                    <option value="iigb-linkedin">IiGB (LinkedIn)</option>
                    <option value="hpo">HPO</option>
                    <option value="other">Other</option>
                    <option value="b2b">B2B</option>
                    <option value="ebook-worldwide">EBOOK - Worldwide</option>
                    <option value="tra">TRA</option>
                    <option value="encore">Encore</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="how-they-heard-dit">
                    How did they hear about DIT?
                </label>
                <select class="govuk-select" id="how-they-heard-dit" name="how-they-heard-dit">
                    <option value="press">Press ad (newspaper/trade publication)</option>
                    <option value="outdoor">Outdoor ad/billboard</option>
                    <option value="linkedin" selected>LinkedIn</option>
                    <option value="social">Other social media (e.g. Twitter/Facebook)</option>
                    <option value="internet">Internet search</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend">
                        Consent (email)
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="" name="consent-email" type="radio"
                                value="yes" checked>
                            <label class="govuk-label govuk-radios__label" for="consent-email">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="consent-email-2" name="consent-email" type="radio"
                                value="no">
                            <label class="govuk-label govuk-radios__label" for="consent-email-2">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend">
                        Consent (telephone)
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="" name="consent-phone" type="radio"
                                value="yes" checked>
                            <label class="govuk-label govuk-radios__label" for="consent-phone">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="consent-phone-2" name="consent-phone" type="radio"
                                value="no">
                            <label class="govuk-label govuk-radios__label" for="consent-phone-2">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>
>>>>>>> Update edit template - marketing

        {% include 'snippets/enquiry_field_select.html' with field=serializer.first_response_channel %}

    </div>

    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">Company details</h3>

        {% include 'snippets/enquiry_field_input.html' with field=serializer.website %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.country %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.region %}

        {% include 'snippets/enquiry_field_input.html' with field=serializer.company_hq_address %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.primary_sector %}

        <!-- TODO: investigate issue and fix Ist sector to IST sector -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.ist_sector %}

    </div>

    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">Contact</h3>

        {% include 'snippets/enquiry_field_input.html' with field=serializer.enquirer_first_name %}

        {% include 'snippets/enquiry_field_input.html' with field=serializer.enquirer_last_name %}

        {% include 'snippets/enquiry_field_input.html' with field=serializer.job_title %}

        <!-- TODO: Change label 'Enquirer email' to 'Enquirer email address' -->
        {% include 'snippets/enquiry_field_input_email.html' with field=serializer.enquirer_email %}

        <!-- TODO: Change label 'Enquirer phone' to 'Enquirer telephone number' -->
        {% include 'snippets/enquiry_field_input_tel.html' with field=serializer.enquirer_phone %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.request_for_call %}

    </div>

    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">Marketing</h3>

        {% include 'snippets/enquiry_field_input.html' with field=serializer.google_campaign %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.marketing_channel %}

        <!-- TODO: Change label to 'How did they hear about DIT?' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.how_they_heard_dit %}

        <!-- TODO: Change label to 'Consent (email)' -->
        {% include 'snippets/enquiry_field_boolean_select.html' with field=serializer.email_consent %}

        <!-- TODO: Change label to 'Consent (telephone)' -->
        {% include 'snippets/enquiry_field_boolean_select.html' with field=serializer.phone_consent %}

    </div>

    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">HPO details</h3>

        <!-- TODO: Change label to 'HPO selection' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.first_hpo_selection %}

        <!-- TODO: Change label to 'Second HPO selection' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.second_hpo_selection %}

        <!-- TODO: Change label to 'Third HPO selection' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.third_hpo_selection %}

    </div>


    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">Data Hub</h3>

        {% include 'snippets/enquiry_field_select.html' with field=serializer.organisation_type %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.investment_type %}

        {% include 'snippets/enquiry_field_input.html' with field=serializer.project_name %}

        {% include 'snippets/enquiry_field_textarea.html' with field=serializer.project_description %}

        {% include 'snippets/enquiry_field_textarea.html' with field=serializer.anonymised_project_description %}

        {% include 'snippets/enquiry_field_input_date.html' with field=serializer.estimated_land_date %}

        <!-- TODO: Change label to 'New or existing investor' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.new_existing_investor %}

        <!-- TODO: Change label to 'Investor level of involvement' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.investor_involvement_level %}

        {% include 'snippets/enquiry_field_select.html' with field=serializer.specific_investment_programme %}

        <!-- TODO: Full implementation searches Data Hub for users -->
        {% include 'snippets/enquiry_field_input.html' with field=serializer.crm %}

        <!-- TODO: Change label to 'Date added to Data Hub' -->
        {% include 'snippets/enquiry_field_input_date.html' with field=serializer.date_added_to_datahub %}

        {% include 'snippets/enquiry_field_input.html' with field=serializer.project_code %}

        <!-- TODO: Change label to 'Data Hub project status' -->
        {% include 'snippets/enquiry_field_select.html' with field=serializer.datahub_project_status %}

        {% include 'snippets/enquiry_field_input_date.html' with field=serializer.project_success_date %}

    </div>

    <div class="govuk-grid-row enquiry-details-row">

        <h3 class="govuk-heading-m">Notes</h3>

        {% include 'snippets/enquiry_field_textarea.html' with field=serializer.notes %}

    </div>

    <button class="govuk-button" data-module="govuk-button" type="submit">Save and return</button>
    <button class="govuk-button govuk-button--secondary" data-module="govuk-button">Cancel</button>

</form>
{% endblock main %}