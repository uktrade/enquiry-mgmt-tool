{% load static %}

{% include 'base.html' %}

{% include 'partials/govuk_header_partial.html' %}

{% csrf_token %}
{% load widget_tweaks %}
{% load rest_framework %}
{% load enquiries_extras %}

<div class="govuk-width-container">

    <a href="{% url 'enquiry-list' %}" class="govuk-back-link">Back</a>

    <main class="govuk-main-wrapper">

        <div class="govuk-grid-row enquiry-details-row enquiry-details-header">

            <h2 class="govuk-heading-l">{{ serializer.company_name.value }}</h2>

            <dl class="govuk-summary-list--no-border">
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Date received
                    </dt>
                    <dd class="govuk-summary-list__value">{{ serializer.created.value }}</dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Date last updated
                    </dt>
                    <dd class="govuk-summary-list__value">{{ serializer.modified.value }}</dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Enquiry stage
                    </dt>
                    <dd class="govuk-summary-list__value">{{ serializer.enquiry_stage.choices|get_item:serializer.enquiry_stage.value }}</dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Owner
                    </dt>
                    <dd class="govuk-summary-list__value">{% if obj.owner %}{{ obj.owner.user }} {%else%} {{ "Unassigned" }} {%endif%}</dd>
                </div>
            </dl>
        </div>

        <div class="govuk-grid-row enquiry-edit-row">

            {% include 'snippets/enquiry_field_input.html' with field=serializer.company_name %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.enquiry_stage %}

            <!-- TODO: Replace with snippet when owner implementation is ready -->
            <div class="govuk-form-group">
                <label for="owner" class="govuk-label">
                    {{ serializer.owner.label }}
                </label>
                <select name="{{ serializer.owner.name }}" id="{{ serializer.owner.name }}" class="govuk-select">
                    <option value="0" {% if not serializer.owner.value %} selected{% endif %}>
                        Unassigned
                    </option>
                    {% for key, owner in serializer.owner.choices.items %}
                    <option value="{{ key }}" {% if key == serializer.owner.value %} selected{% endif %}>
                        {{ owner }}
                    </option>
                    {% endfor %}
                </select>
            </div>

        </div>

        <div class="govuk-grid-row enquiry-edit-row">

            <h3 class="govuk-heading-m">Enquiry details</h3>

            {% include 'snippets/enquiry_field_textarea.html' with field=serializer.enquiry_text %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.investment_readiness %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.quality %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.first_response_channel %}

        </div>

        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Company details</h3>

            {% include 'snippets/enquiry_field_input.html' with field=serializer.website %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.country %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.region %}

            {% include 'snippets/enquiry_field_input.html' with field=serializer.company_hq_address %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.primary_sector %}

            <!-- TODO: investigate issue and fix Ist sector to IST sector -->
            {% include 'snippets/enquiry_field_select.html' with field=serializer.ist_sector %}

        </div>

        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Contact</h3>

            {% include 'snippets/enquiry_field_input.html' with field=serializer.enquirer_first_name %}

            {% include 'snippets/enquiry_field_input.html' with field=serializer.enquirer_last_name %}

            {% include 'snippets/enquiry_field_input.html' with field=serializer.job_title %}

            <!-- TODO: Change label 'Enquirer email' to 'Enquirer email address' -->
            {% include 'snippets/enquiry_field_input_email.html' with field=serializer.enquirer_email %}

            <!-- TODO: Change label 'Enquirer phone' to 'Enquirer telephone number' -->
            {% include 'snippets/enquiry_field_input_tel.html' with field=serializer.enquirer_phone %}

            {% include 'snippets/enquiry_field_select.html' with field=serializer.request_for_call %}

        </div>

        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Marketing</h3>

            <div class="govuk-form-group">
                <label class="govuk-label" for="google-campaign">
                    Google campaign
                </label>
                <input class="govuk-input" id="google-campaign" name="google-campaign" type="text" value="#r.4142563726849_345374257">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="marketing-channel">
                    Marketing channel
                </label>
                <select class="govuk-select" id="marketing-channel" name="marketing-channel">
                    <option value="linkedinleadgen">LinkedInLeadGen</option>
                    <option value="chogm">CHOGM</option>
                    <option value="iigb" selected>IiGB</option>
                    <option value="iigb-linkedin">IiGB (LinkedIn)</option>
                    <option value="hpo">HPO</option>
                    <option value="other">Other</option>
                    <option value="b2b">B2B</option>
                    <option value="ebook-worldwide">EBOOK - Worldwide</option>
                    <option value="tra">TRA</option>
                    <option value="encore">Encore</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="how-they-heard-dit">
                    How did they hear about DIT?
                </label>
                <select class="govuk-select" id="how-they-heard-dit" name="how-they-heard-dit">
                    <option value="press">Press ad (newspaper/trade publication)</option>
                    <option value="outdoor">Outdoor ad/billboard</option>
                    <option value="linkedin" selected>LinkedIn</option>
                    <option value="social">Other social media (e.g. Twitter/Facebook)</option>
                    <option value="internet">Internet search</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend">
                        Consent (email)
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="" name="consent-email" type="radio"
                                value="yes" checked>
                            <label class="govuk-label govuk-radios__label" for="consent-email">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="consent-email-2" name="consent-email" type="radio"
                                value="no">
                            <label class="govuk-label govuk-radios__label" for="consent-email-2">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>

            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend">
                        Consent (telephone)
                    </legend>
                    <div class="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="" name="consent-phone" type="radio"
                                value="yes" checked>
                            <label class="govuk-label govuk-radios__label" for="consent-phone">
                                Yes
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="consent-phone-2" name="consent-phone" type="radio"
                                value="no">
                            <label class="govuk-label govuk-radios__label" for="consent-phone-2">
                                No
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>

        </div>

        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">HPO details</h3>

            <div class="govuk-form-group">
                <label class="govuk-label" for="hpo-selection">
                    HPO selection
                </label>
                <select class="govuk-select" id="hpo-selection" name="hpo-selection">
                    <option value="food-production">Food production</option>
                    <option value="uk-rail">UK Rail</option>
                    <option value="lightweight-structures">Lightweight structures</option>
                    <option value="na" selected>N/A</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="second-hpo-selection">
                    Second HPO selection
                </label>
                <select class="govuk-select" id="second-hpo-selection" name="second-hpo-selection">
                    <option value="food-production">Food production</option>
                    <option value="uk-rail">UK Rail</option>
                    <option value="lightweight-structures">Lightweight structures</option>
                    <option value="na" selected>N/A</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="third-hpo-selection">
                    Third HPO selection
                </label>
                <select class="govuk-select" id="third-hpo-selection" name="third-hpo-selection">
                    <option value="food-production">Food production</option>
                    <option value="uk-rail">UK Rail</option>
                    <option value="lightweight-structures">Lightweight structures</option>
                    <option value="na" selected>N/A</option>
                </select>
            </div>

        </div>


        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Data Hub</h3>

            <div class="govuk-form-group">
                <label class="govuk-label" for="organisation-type">
                    Organisation type
                </label>
                <select class="govuk-select" id="organisation-type" name="organisation-type">
                    <option value="charity">Charity</option>
                    <option value="government-department">Government department or other public body</option>
                    <option value="limited-company" selected>Limited company</option>
                    <option value="limited-partnership">Limited partnership</option>
                    <option value="partnership">Partnership</option>
                    <option value="sole-trader">Sole trader</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="type-of-investment">
                    Type of investment
                </label>
                <select class="govuk-select" id="type-of-investment" name="type-of-investment">
                    <option value="acquisition">Acquisition</option>
                    <option value="capital-only">Capital only</option>
                    <option value="creation-of-new-site-or-activity">Creation of new site or activity
                    </option>
                    <option value="expansion-of-new-site-or-activity" selected>Expansion of existing site or
                        activity</option>
                    <option value="joint-venture">Joint venture</option>
                    <option value="merger">Merger</option>
                    <option value="retention">Retention</option>
                    <option value="not-specified">Not specified</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="project-name">
                    Project name
                </label>
                <input class="govuk-input" id="project-name" name="project-name" type="text"
                    value="CE Hummingbird">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="project-description">
                    Project description
                </label>
                <textarea class="govuk-textarea" id="project-description" name="project-description"
                    rows="5">Expansion of CE Hummingbird factory site</textarea>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="anonymised-project-description">
                    Anonymised project description
                </label>
                <textarea class="govuk-textarea" id="anonymised-project-description" name="anonymised-project-description"
                    rows="5">Expansion of CE Hummingbird factory site</textarea>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="estimated-land-date">
                    Estimated land date
                </label>
                <input class="govuk-input" id="estimated-land-date" name="estimated-land-date" type="date"
                    value="2020-02-03">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="new-or-existing-investor">
                    New or existing investor
                </label>
                <select class="govuk-select" id="new-or-existing-investor" name="new-or-existing-investor">
                    <option value="existing-investor" selected>Existing investor</option>
                    <option value="new-investor">New investor</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="investor-level-of-involvement">
                    Investor level of involvement
                </label>
                <select class="govuk-select" id="investor-level-of-involvement" name="investor-level-of-involvement">
                    <option value="FDI-Hub-HQLEP">FDI Hub + HQ + LEP</option>
                    <option value="FDI-Hub-HQ-Post-LEP">FDI Hub + HQ + Post + LEP</option>
                    <option value="FDI-Hub-HQ-Post-Reg">FDI Hub + HQ + Post + Reg</option>
                    <option value="FDI-Hub-HQ-Reg">FDI Hub + HQ + Reg</option>
                    <option value="FDI-Hub-LEP">FDI Hub + LEP</option>
                    <option value="FDI-Hub-Post" selected>FDI Hub + Post</option>
                    <option value="FDI-Hub-Post-HQ">FDI Hub + Post + HQ</option>
                    <option value="FDI-Hub-Post-LEP">FDI Hub + Post + LEP</option>
                    <option value="FDI-Hub-Post-Reg">FDI Hub + Post + Reg</option>
                    <option value="FDI-Hub-Region">FDI Hub + Region</option>
                    <option value="FDI-Hub-Only">FDI Hub Only</option>
                    <option value="HQ-LEP">HQ + LEP</option>
                    <option value="HQ-Post-LEP">HQ + Post + LEP</option>
                    <option value="HQ-Only">HQ Only</option>
                    <option value="HQ-and-Post-Only">HQ and Post Only</option>
                    <option value="HQ-and-Region">HQ and Region</option>
                    <option value="HQ-Post-and-Region">HQ, Post and Region</option>
                    <option value="LEP-Only">LEP Only</option>
                    <option value="No-involvement">No involvement</option>
                    <option value="Post-LEP">Post + LEP</option>
                    <option value="Post-Only">Post Only</option>
                    <option value="Post-and-Region">Post and Region</option>
                    <option value="Region-Only">Region Only</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="specific-investment-programme">
                    Specific investment programme
                </label>
                <select class="govuk-select" id="investor-level-of-involvement" name="investor-level-of-involvement">
                    <option value="Advanced-Engineering-Supply-Chain">Advanced Engineering Supply Chain</option>
                    <option value="Business-Partnership-Non-FDI">Business Partnership (Non-FDI)</option>
                    <option value="Contract-Research-Non-FDI">Contract Research (Non-FDI)</option>
                    <option value="FDI-Capital-Only">FDI (Capital Only)</option>
                    <option value="GREAT-Investors-Programme">GREAT Investors Programme</option>
                    <option value="Global-Entrepreneur-Programme">Global Entrepreneur Programme</option>
                    <option value="Graduate-Entrepreneur-Programme">Graduate Entrepreneur Programme</option>
                    <option value="HQ-UK">HQ-UK</option>
                    <option value="II-I-Programme">II&I Programme</option>
                    <option value="Infrastructure-Gateway">Infrastructure Gateway</option>
                    <option value="Invest-in-Great-Britain">Invest in Great Britain</option>
                    <option value="No-Specific-Programme">No Specific Programme</option>
                    <option value="R&D-Collaboration-Non-FDI">R&D Collaboration (Non-FDI)</option>
                    <option value="R&D-Partnership-Non-FDI">R&D Partnership (Non-FDI)</option>
                    <option value="R&D-Prog-Obsolete">R&D Prog (Obsolete)</option>
                    <option value="Regeneration-Investment-Organisation-RIO">Regeneration Investment Organisation (RIO)</option>
                    <option value="SRM-Programme">SRM Programme</option>
                    <option value="Screen-Production-Investment">Screen Production Investment</option>
                    <option value="Siriusâ€“Graduate-Entrepreneurs">Sirius (Graduate Entrepreneurs)</option>
                    <option value="Space">Space</option>
                    <option value="University-Collaboration-Non-FDI">University Collaboration (Non-FDI)</option>
                    <option value="Venture-Equity-Capital">Venture / Equity Capital</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="crm">
                    CRM
                </label>
                <input class="govuk-input" id="crm" name="crm" type="text"
                    value="Data Hub user 1">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="date-added-to-data-hub">
                    Date added to Data Hub
                </label>
                <input class="govuk-input" id="date-added-to-data-hub" name="date-added-to-data-hub" type="date"
                    value="2020-02-03">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="project-code">
                    Project code
                </label>
                <input class="govuk-input" id="project-code" name="project-code" type="text"
                    value="42901">
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="data-hub-project-status">
                    Data Hub project status
                </label>
                <select class="govuk-select" id="data-hub-project-status" name="data-hub-project-status">
                    <option value="prospect">Prospect</option>
                    <option value="assign-pm">Assign PM</option>
                    <option value="active" selected>Active</option>
                    <option value="verify-win">Verify Win</option>
                    <option value="won">Won</option>
                    <option value="abandoned">Abandoned</option>
                    <option value="delayed">Delayed</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label" for="project-success-date">
                    Project success date
                </label>
                <input class="govuk-input" id="project-success-date" name="project-success-date" type="date"
                    value="2022-02-03">
            </div>

        </div>

        <div class="govuk-grid-row enquiry-details-row">

            <h3 class="govuk-heading-m">Notes</h3>

            <div class="govuk-form-group">
                <label class="govuk-label" for="notes">
                    Notes
                </label>
                <textarea class="govuk-textarea" id="notes" name="notes" rows="5">This is the notes section. The IST user can add any notes relating to the enquiry. This is a textarea and the user can input multiple lines of text.</textarea>
            </div>

        </div>

        <button class=" govuk-button
                govuk-button--secondary govuk-!-margin-right-1" data-module="govuk-button">
            Edit details
        </button>

        <button class="govuk-button govuk-button--secondary" data-module="govuk-button">
            Export csv file
        </button>

        <p></p>

        <button class="govuk-button govuk-!-margin-right-1" data-module="govuk-button">
            Submit to Data Hub
        </button>

        <p></p>

        <h2 class="govuk-heading-m">Audit history</h2>

        <p>IST User 4 made 7 changes on 3 February 2020.</p>

        <p>IST User 4 created the enquiry on 31 January 2020.</p>

        <a class="govuk-link" href="#">View full audit history</a>

    </main>
</div>

{% include 'partials/govuk_footer_partial.html' %}
