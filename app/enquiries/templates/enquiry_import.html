{% load static %}
{% include 'base.html' %}
{% load widget_tweaks %}
{% load rest_framework %}
{% include 'partials/govuk_header_partial.html' %}

<div class="govuk-width-container">
    <hr class="govuk-section-break govuk-section-break--m govuk-section-break">

    <a href="{% url 'enquiry-list' %}" class="govuk-back-link">Back</a>
    <div class="govuk-grid-row">
    <h1 class="govuk-heading-l">Import Enquiries</h1>
    {% if messages %}
    <div class="govuk-error-summary {% if has_success%}govuk-error-summary--success{% endif %}" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
        <h2 class="govuk-error-summary__title" id="error-summary-title">
            There is a problem
        </h2>
        <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
            {% for message in messages %}
            <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
        </div>
    </div>
    {% endif %}
</div>
<div class="govuk-grid-row">
    <h3 class="govuk-heading-s">
        Steps
    </h3>
    <ol class="govuk-list govuk-list--number">
        <li>Click <a href="{% url 'import-template' %}"><strong>Download template </strong></a> to download the CSV template</li>
        <li>Open the template and insert the enquiries data in the 'enquiries' sheet</li>
        <li>Save the sheet as CSV file (eg Enquiries_DDMMYYYY.csv)</li>
        <li>Click <strong>Choose file</strong>, locate your CSV file and then click <strong>Open</strong></li>
        <li>Click Upload file</li>
    </ol>
</div>
<div class="govuk-grid-row">
    <form method="post" action="" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="govuk-form-group">
            <label class="govuk-label" for="file-upload-1">
                <strong>Choose a file to upload</strong>
            </label>
            <input class="govuk-file-upload" id="enquiries" name="enquiries" type="file">
            <button class="govuk-button govuk-!-margin-top-6" type="submit" data-module="govuk-button" style="display: block">
                Upload File
            </button>
        </div>
    </form>
</div>
</div>
{% include 'partials/govuk_footer_partial.html' %}
